---
title: MAC地址
date: 2019-04-17 13:59:31
tags: [ARP,MAC,IP,NAT]
---

#### ARP广播

##### 1、目标IP与自己在同一网段

-  **arp高速缓存有目标IP的MAC地址**：直接发送到该物理地址
-  **arp高速缓存没有目标IP的MAC地址**：发送ARP广播请求目标IP的MAC地址，缓存该MAC地址，然后发数据报到该MAC地址。

<!--more-->

<br/>



##### 2、目标IP与自己不在同一个网段

**这种情况需要将包发给默认网关，所以主要获取网关的MAC地址**

-  **arp高速缓存有默认网关的MAC地址**：直接发送IP数据报道默认网关，再由网关转发到外网。
-  **arp高速缓存没有默认网关的MAC地址** ：还是发送ARP广播请求默认网关的MAC地址，缓存该地址，并且发送数据报到网关

<br/>



#### MAC地址变换

##### 数据包在传输过程，MAC地址是如何变换的？

在不考虑代理的情况下，数据包每到一个三层，就把源MAC替换成自己的出接口MAC，目标MAC替换成下一跳MAC，不跨三层不替换。

注：**应用层、表示层、会话层、传输层、网络层、数据链路层、物理层**

<br/>



#### 多个MAC地址

一台设备若有一或多个网卡，则每个网卡都需要并会有一个唯一的MAC地址。

<br/>

